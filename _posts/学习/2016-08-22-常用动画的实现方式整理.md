---
layout: post
category: 学习之路
---

tag:

1.cornerRadius 属于layer层的参数，无法通过UIView animation来动画变更

```
    CABasicAnimation *basicAnimation = [CABasicAnimation animationWithKeyPath:@"cornerRadius"];
    basicAnimation.duration = 0.2;
    [self.animationView.layer setCornerRadius:20.0f];
    [self.animationView.layer addAnimation:basicAnimation forKey:@"cornerRadius"];
```

2.CGAffineTransformMakeRotation 使用的时候  如果直接frame变更 会导致形变 使用center的变更来变更位置就不会。

3.CAAnimation 的代理

```
CABasicAnimation *animation = [CABasicAnimation animation];
animation.keyPath = @"position.x";
animation.fromValue = @(15);
animation.toValue = @(SCREEN_WIDTH-15);
animation.duration = 1.0f;
animation.autoreverses = YES;
animation.repeatCount = HUGE_VAL;

// 保证fillMode起作用
// flyRight.removedOnCompletion = false
// 动画结束后,layer会保持结束状态
// flyRight.fillMode = kCAFillModeForwards
animation.delegate = self;
[self.imageViewOne.layer addAnimation:animation forKey:@"p_img_one"];


-(void)animationDidStart:(CAAnimation *)anim
{
    NSLog(@"start");
}
-(void)animationDidStop:(CAAnimation *)anim finished:(BOOL)flag
{
    NSLog(@"stop");
}
```



4.当UIView remove出父容器  UIView 会自动销毁  layer动画也是  但我们处理layer销毁的时候最好还是主动去remove掉动画



5.如何主动停止



UIView 动画  / Layer动画    通用

removeAllAnimations 或者移除某个动画  



暂停/恢复：

    if (self.imageViewOne.layer.speed == 0.0) {
      CFTimeInterval pausedTime = [self.imageViewOne.layer timeOffset];
      self.imageViewOne.layer.speed = 1.0;
      self.imageViewOne.layer.timeOffset = 0.0;
      self.imageViewOne.layer.beginTime = 0.0;
      CFTimeInterval timeSincePause = [self.imageViewOne.layer convertTime:CACurrentMediaTime() fromLayer:nil] - pausedTime;
      self.imageViewOne.layer.beginTime = timeSincePause;
    }else{
    
    CFTimeInterval pausedTime = [self.imageViewOne.layer convertTime:CACurrentMediaTime() fromLayer:nil];
    self.imageViewOne.layer.speed = 0.0;
    self.imageViewOne.layer.timeOffset = pausedTime;
    }
在一个动画过程中插入其他动画  阻塞？



6.CA动画 基本 key path 

position.x 针对的时center

#### 一些常用的animationWithKeyPath值的总结

| 值                       | 说明                  | 使用形式                                     |
| ----------------------- | ------------------- | ---------------------------------------- |
| transform.scale         | 比例转化                | @(0.8)                                   |
| transform.scale.x       | 宽的比例                | @(0.8)                                   |
| transform.scale.y       | 高的比例                | @(0.8)                                   |
| transform.rotation.x    | 围绕x轴旋转              | @(M_PI)                                  |
| transform.rotation.y    | 围绕y轴旋转              | @(M_PI)                                  |
| transform.rotation.z    | 围绕z轴旋转              | @(M_PI)                                  |
| cornerRadius            | 圆角的设置               | @(50)                                    |
| backgroundColor         | 背景颜色的变化             | (id)[UIColor purpleColor].CGColor        |
| bounds                  | 大小，中心不变             | [NSValue valueWithCGRect:CGRectMake(0, 0, 200, 200)]; |
| position                | 位置(中心点的改变)          | [NSValue valueWithCGPoint:CGPointMake(300, 300)]; |
| contents                | 内容，比如UIImageView的图片 | imageAnima.toValue = (id)[UIImage imageNamed:@"to"].CGImage; |
| opacity                 | 透明度                 | @(0.7)                                   |
| contentsRect.size.width | 横向拉伸缩放              | @(0.4)最好是0~1之间的                          |