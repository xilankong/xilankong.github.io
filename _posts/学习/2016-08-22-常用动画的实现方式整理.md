---
layout: post
category: 学习之路
---

tag:

1.cornerRadius 属于layer层的参数，无法通过UIView animation来动画变更

```
    CABasicAnimation *basicAnimation = [CABasicAnimation animationWithKeyPath:@"cornerRadius"];
    basicAnimation.duration = 0.2;
    [self.animationView.layer setCornerRadius:20.0f];
    [self.animationView.layer addAnimation:basicAnimation forKey:@"cornerRadius"];
```

2.CGAffineTransformMakeRotation 使用的时候  如果直接frame变更 会导致形变 使用center的变更来变更位置就不会。

3.CAAnimation 的代理

```
CABasicAnimation *animation = [CABasicAnimation animation];
animation.keyPath = @"position.x";
animation.fromValue = @(15);
animation.toValue = @(SCREEN_WIDTH-15);
animation.duration = 1.0f;
animation.autoreverses = YES;
animation.repeatCount = HUGE_VAL;

// 保证fillMode起作用
// flyRight.removedOnCompletion = false
// 动画结束后,layer会保持结束状态
// flyRight.fillMode = kCAFillModeForwards
animation.delegate = self;
[self.imageViewOne.layer addAnimation:animation forKey:@"p_img_one"];


-(void)animationDidStart:(CAAnimation *)anim
{
    NSLog(@"start");
}
-(void)animationDidStop:(CAAnimation *)anim finished:(BOOL)flag
{
    NSLog(@"stop");
}
```



4.当UIView remove出父容器  UIView 会自动销毁  layer动画也是  但我们处理layer销毁的时候最好还是主动去remove掉动画



5.如何主动停止



UIView 动画  





Layer动画

removeAllAnimations 或者移除某个动画



暂停/恢复：

    if (self.imageViewOne.layer.speed == 0.0) {
      CFTimeInterval pausedTime = [self.imageViewOne.layer timeOffset];
      self.imageViewOne.layer.speed = 1.0;
      self.imageViewOne.layer.timeOffset = 0.0;
      self.imageViewOne.layer.beginTime = 0.0;
      CFTimeInterval timeSincePause = [self.imageViewOne.layer convertTime:CACurrentMediaTime() fromLayer:nil] - pausedTime;
      self.imageViewOne.layer.beginTime = timeSincePause;
    }else{
    
    CFTimeInterval pausedTime = [self.imageViewOne.layer convertTime:CACurrentMediaTime() fromLayer:nil];
    self.imageViewOne.layer.speed = 0.0;
    self.imageViewOne.layer.timeOffset = pausedTime;
    }