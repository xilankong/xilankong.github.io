---
layout: post
category: 学习之路
---

## 1.关于Shell

### 1.Shell 脚本的基本元素

1. 指定命令解读器  如：#!/bin/bash
2. 注释 ：说明某些代码的功能
3. 可执行语句 ：功能语句

### 2.指定命令解读器

一个.sh脚本执行的时候会先检查用户是否拥有该程序的执行权限

无：”Permission denied“ 提示

有：创建一个新的进程并执行语句

但是，Mac OSX 也是基于Unix 的 通常会同时安装多个Shell程序（sh,bash,csh等）

而不同的Shell程序语法有一定区别，到底使用哪个来执行代码系统无法正确判断，或者会默认调用执行导致执行结果并非我们期待的结果。

所以,Shell规定 “#!” 标识后面指定解释器的绝对路径 以方便创建指定解释器进程，解释并执行当前脚本。

### 3.Shell脚本中的注释和风格

Shell只支持单行注释 表示方法是#号

但是并不是说就只能用单行注释了 通过:<< 后面写参数 ，但是要和结尾部分的参数想同 成对。

```
:<<xxx
echo "-----"
xxx
```

### 4.如何执行Shell程序

1. 授权，直接执行 [ "chmod +x setup.sh"  然后  "./setup.sh" ]
2. 调用Shell脚本的解释器来执行 [ /bin/bash setup.sh ]
3. 通过source命令执行 [ source setup.sh ]

### 5.Shell程序的退出状态

每个命令都会返回一个退出状态码 退出状态码是一个整数，有效范围是0～255，通常情况下，成功的命令返回0，而不成功的命令返回非0值。

我们也可以根据逻辑判断 主动exit 错误码到shell。

## 2.Shell脚本的参数

| 变量名称 | 说明                              |
| :--: | :------------------------------ |
|  $n  | 表示传递给脚本的第n个参数，例如$1表示传人的第一个参数    |
|  $#  | 命令行参数个数                         |
|  $0  | 当前脚本的名称                         |
|  $*  | 以 ”参数1 参数2 参数3“ 的格式返回所有参数的值     |
|  $@  | 以 ”参数1“ ”参数2“ ”参数3“ 的格式返回所有参数的值 |
|  $_  | 保存之前执行的命令的最后一个参数                |

代码：

```
#!/usr/bin/env bash
echo "$@"
```

结果：

```
Mac $ ./setup.sh a "b,c"
a b,c
```

3.参数扩展

OPTIND，反映下一个要处理的参数索引

