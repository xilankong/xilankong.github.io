---
layout: post
category: 2017年
title : "iOS自定义导航"
---

> 随着业务的增多，用户体验要求的提高，原生的导航条已经越来越不能满足现在的产品需求，所以我们需要自定义合适的导航。



需要解决的问题：

1、不想再换个控制器更新一次导航条、各个控制器之间导航条不相互影响

2、推控制器的时候不想再使用截屏

3、能适应多种导航条样式

4、导航条涉及到的自定义内容问题解决方法提供



然后我们带着问题，一个个去解决：



第一点，系统默认走的是一个UINavigationController 控制整个导航链、链中串着的是我们使用的一个个controller。当 A controller 需要在导航条添加一点自定义内容 的时候，需要在离开的时候还原，以防下个controller被影响。

但是，随着业务繁多、用户体验要求的提高，导航条的样式变得各种各样，普通的导航条已经无法适应这种场景。

所以，我们需要让每一个控制器都带一个UINavigationController , 但是UINavigationController是不能直接推UINavigationController的，所以如下做一层包装：

```
YangContainerController：

self.contentViewController = controller;
self.containerNavigationController = [[JFZContainerNavigationController alloc] initWithNavigationBarClass:navigationBarClass toolbarClass:nil];

self.containerNavigationController.viewControllers = @[controller];

[self addChildViewController:self.containerNavigationController];
[self.containerNavigationController didMoveToParentViewController:self];

NavigationController被包装在ContainerController中。

```

那要怎么保证每一个转场出来的控制器都是如上的呢？这个第二点会讲到：



第二点，除开系统导航转场之前用过一段时间的自定义转场动画，然后转场过程中前一个页面的显示是通过截图来截取的，但是截图的方式问题比较多，没有原生转场好用。

在这，我们定义一个YangRootNavigationController（根导航） 专门用来做转场操作，隐藏它的NavigationBar，保留转场能力。对所有转场方法进行重写，所有的转场都通过根导航去做。同时可以完成第一点遗留下来的问题。每次推送都对控制器进行一次包装，这样使用者就可以无缝、透明的去按原有逻辑使用新的这一套导航。







[demo](https://github.com/xilankong/YangNavigationHelper)