---
layout: post
category: 学习之路
title: "IOS学习入门分享"
---

## 1.概述

开发工具  ：Xcode （本机 MBP 8G + 256固态 ,非Mac 可以安装黑苹果转MAC OS）

当前版本 Xcode 基本不支持插件，自带功能够用

IOS API 可以在Xcode中直接查找 （路径：Window - Documenttion And Api Reference）



## 2.语言基础

### C 语言

熟悉基本数据类型、判断与循环语句、函数与变量作用域、

基本运算与进制、基本算法、数组与指针、枚举、宏定义

### Objective-C 语言

扩充C的面向对象编程语言，面向对象、完全兼容C语言

#### .h/.m

```
.h 表示头文件，用来声明各种成员变量，方法，属性之类的。在import的时候用头文件。

.m 主要用来实现.h 里声明的方法
```

#### @符号的使用 

```
@property 声明属性
@property (nonatomic，assign) int running

@interface 声明类
@interface myView : UIView
@end
@implementation myView
@end

@protocol 声明协议
@protocol myProtocol <NSObject>
@end

用作数组字典等OC专用类型
NSArray  *array = @[]; 
NSDictionary *dic = @{};
还可以把普通的数据类型转换为OC的对象类型
NSString *str = @"xxx";   

等等
```

#### OC 方法

```
声明
- (void)apiAction:(UIButton *)btn;
实现
- (void)apiAction:(UIButton *)btn {
	 return xxx;
}
```



#### 其他

block, 代理模式, 分类 categroy  延展 extension、协议 （类似java接口） 和泛型 （IOS7 以后）等等



### Swift 语言

Swift 是 Apple 自创的一门专门为 Cocoa 和 CocoaTouch 设计的语言，意在用来替代 OC （ Xcode 6 / IOS 7 以上）。Swift采用了安全的编程模式和添加现代的功能来使得编程更加简单、灵活和有趣、更容易阅读。界面则基于广受人民群众爱戴的Cocoa和Cocoa Touch框架，展示了软件开发的新方向。

> cocoa包含Foundation和AppKit、Core Data等框架，可用于开发Mac OS X系统的应用程序
>
> cocoa touch包含Foundation和UIKit框架，可用于开发iPhone OS 系统的应用程序

所有的 Swift 代码都将被 LLVM 编译为 native code，以极高的效率运行。

按照官方今天给出的 数据，运行时比 Python 快 3.9 倍，比 objc 快 1.4 倍左右。



1.Swift中的函数和闭包都是一等公民

2.Swift是强类型 ：意思就是一个变量或者常量要有确定的类型  （目的是把错误推到编译时发生，减少运行时bug出现的几率, 安全）

3.类型推断 （语法糖）

    // 变量intValue没有显式声明一个特定的类型，编译器会根据其赋值语句推断出它的类型为Int
    var intValue = 10 
    intValue = "" //无法通过

4.结构体

结构体和类几乎一样，都可以定义属性，定义方法，实现协议，初始化方法，定义拓展，定义下标支持。但是类又多了继承，运行时类型检查以及转换，deinit方法允许释放资源，引用计数。总得来说，类多了内存管理和继承。结构体的设计初衷就是为了简单封装一些数据，并不需要太多的面向对象的特性

5.可选值

Swift 的可选可以让你暗示任意类型的值缺失，并不需要一个特殊值

6.POP 面向协议的编程, Swift开发  从一个protocol开始，别从class开始。

```
除了类，Swift的协议让值类型的struct、 枚举都实现类似多态的能力

1.Protocol Composition
protocol 有点类似于 java 的接口，同样可以多实现

2.Protocol extension
协议可以扩展到提供方法和属性实现符合类型，所有实现了协议的类或者结构体等 都会默认获得这些方法，属性默认实现，与默认值

3.class Protocol
类专用协议
```



## 3.Xcode的使用

### Xcode 操作面板

![](https://xilankong.github.io/resource/xcodeIDE.png)

#### 1.工具栏

你选择工作视图,运行app,在不同布局界面切换的地方

从左到右分别是：

运行、停止按钮、Scheme列表、模拟器列表、活动查看、编辑器模式配置按钮组、切换界面布局按钮组

#### 2.导航区

导航你整个工程、警告、报错、搜索等的地方

从左到右八个按钮分别是：

```
项目导航：检索项目源代码和资源文件

符号导航：显示代码中得类、对象、函数、变量、属性等元素

搜索导航：全工程搜索器

事件导航：显示工作区找到的事件，如编译错误、语法错误等错误、异常提示信息

测试导航：显示单元测试用例以及测试结果

调试导航：显示程序在调试状态下得资源占用状态以及堆栈信息

断点导航：显示开发过程中在工程中打的断点信息

日志导航：显示日志信息，编译、分析、调试方面的日志
```

#### 3.编辑区

所有奇迹诞生的地方

跳转栏：显示当前编辑器编辑的文件路径，还可以直接跳转到项目任意层次任意文件

编辑区域：源代码编辑器、辅助编辑器、界面生成器、版本编辑器等等

#### 4.工具区

包含检测器和一些库

检查器：查看更改编辑器选中元素的相关特性

库导航栏：资源库导航（文件模板、代码片段、对象、媒体文件）

#### 5.调试区

包括调试窗口和变量检测器

断点执行、位置模拟、输出控制台、调试功能区

#### 6.Xcode系统工具条

Product 常用

```
Run 运行app

Test 运行单元测试

Build 编译

Clean 清空缓存

Scheme 修改编译运行需要的一些 Configuration
```



### 创建一个项目

新建项目流程 （每个属性的分别意义）

Xcode File  -  New - Project

Project 选择 Single View Application

Project Options：

```
Product Name ：项目名称
Team ：开发者信息
Organization Name ：一般式公司域名倒写
Organization Identifier ： 一般式公司域名倒写
Bundle Identifier ：Organization Identifier 再 加上 Product Name
Language ：开发语言 （Objective-C、Swift）
Devices ：设备支持 （Universal 、 iPhone、iPad）
Use Core Data : 是否使用数据持久化
Include Unit Tests ：是否包含单元测试Target
Include UI Tests : 是否包含UI测试Target
```



创建完成后项目目录结构(swift)

```
demo
--demo
----AppDelefate.swift
----ViewController.swift
----Main.storyboard
----Assets.xcassets
----LaunchScreen.storyboard
----Info.plist
----demo.xcdatamodeld //勾选了 Use Core Data 才有
--demoTests //勾选了 Include Unit Tests 才有
--demoUITests //勾选了 Include UI Tests 才有
--Products
--Frameworks //添加了第三方库才有
```

### Xcode 配置分析

详细分析传送门

#### 1.PROJECT 和 TARGETS

project就是一个工程，一个project可以对应多个target (创建一个project，xcode会默认生成一个target)。

targets之间完全没有关系。但target和project有关系，target的setting会从project settings中继承一部分。

targets 一个target对应一个新的product(基于同一份代码的情况下)。

虽然代码是同一份, 但编译设置(比如编译条件), 以及包含的资源文件却可以有很大的差别. 于是即使同一份代码, 产出的product也可能大不相同。例如我们一份代码需要做出不同应用环境的 app 这个时候target的作用就出来了。  

每个target单独会有一份 info.plist

Manage Schemes 可以变更target

#### 2.PROJECT 部分 - Info

Deployment  Target ：运行应用需要的最低操作系统版本

configurations ：编译环境 

Localizations : 语言本地化

#### 3.PROJECT 部分 - Build Settings

刚接触IOS开发比较少需要更改

#### 4.TARGET 部分 - Info

**Custom iOS Target Properties**

```
Bundle versions string, short : 是正式的版本号，跟itunes上的版本号一致，Bundle Version 可用作内部版本时使用，当Bundle Version String缺省时，Bundle Version替代Bundle Version String的功能，同时也继承他的限制(比如格式，位数等)，需与itunes上的版本号保持一致。

Bundle identifier ：app标识，一般按反域名的方式写，默认使用创建项目的时候填写的内容。

Main storyboard file base name : 主 storyboard 文件名字。

Bundle version：内部版本号，不对外公开。

Launch screen interface file base name ： 启动图 storyboard 文件名字。

Executable file ：$(EXECUTABLE_NAME) 执行程序名，默认与 PRODUCT_NAME 一致。

Bundle name：目标项目的名字(TARGETS下面的名字)，默认使用创建项目的时候填写的Product Name。

Bundle display name : 显示在手机屏幕上的应用名字。

Supported interface orientations ：横竖屏支持。

Localization native development region ： 本地开发默认地区。

Required device capabilities ： 设备运行环境、比如有的静态库不支持某些指令集（CPU决定）。

当我们需要使用某些系统权限和对应的提示文案也是配置在这里：

Privacy - Photo Library Usage Description : 照片库权限弹窗说明。

Privacy - Camera Usage Description ： 相机权限弹窗说明。
```

**URL Types**

做一些三方应用唤起的配置

#### 5.TARGET 部分 - General

**Identity**

Display Name : 显示在手机屏幕上的应用名字。

Bundle Identifier : app标识，一般按反域名的方式写，默认使用创建项目的时候填写的内容。

Version ：正式的版本号

Build : 内部版本号，不对外公开。

##### **Signing**

Team : 对应的开发者账号 Apple ID

Provisioning Profile : 配置文件

Signing Certificate : 签名证书

##### **Deployment Info**

Deployment Target ：运行应用需要的最低操作系统版本

Devices ：设备支持（手机、平板，通用）

Main Interface ：入口。

Devices Orientation ：横竖屏支持。

Status Bar Style ：顶部状态栏类型。

**App Icons and Launch Images**

app 图标 和 启动图配置

**Linked Frameworks and Libraries**

需要引入的 frameworks  或者 libraries 列表

#### 6.TARGET 部分 - Capabilities

功能配置、一部分是绑定开发账号的，如 Push Notifications 推送

#### 7.TARGET 部分 - Build Phases

Target Dependencies ：Target依赖,某些Target可能依赖某个Target。

Compile Sources : 已编译文件

Link Binary With Libraries ：第三方类库

Copy Bundle Resources ：资源文件

#### 8.Scheme部分 - Info （Product-Scheme-Edit Scheme）

Build Configuration ： 配置当前target使用 Debug 或者 Release 编译环境



### Xcode 资源

#### 1.图片

Assets.xcassets 以 Image Set (图片集)的方式存储图片。

IOS 初始化图片 : let image = UIImage(named: "xxx")

一个图片集包括 @1x、@2x、@3x 三个规格的图片，分别对应不同的scale（分辨率）。同时，也可以针对不同设备设置图片(比如同一个名字的图片集，iphone和ipad要用不一样的图片)。通常上面初始化方法中的 “xxx” 就是图片集的名字, 在图片集里面放两张不一样的@2x和@3x图片，在iPhone6和iPhone6 Plus加载出来的会不一样。

AppIcon 表示 应用图标的图片管理 Set、LaunchImage表示启动页那张图，也可以通过 LaunchScreen.storyboard 配图。

slicing 未完成



#### 2.代码片段

常用的代码封装成代码片段

![](https://xilankong.github.io/resource/xcodeCode.png)

```
图中从上到下的含义依次是：
①Title
代码片段的标题
②Summary
代码片段的描述文字
③Platform
可以使用代码片段的平台
④Language
可以在哪些语言中使用该代码片段
⑤Completion Shortcut
代码片段的快捷方式，比如本文开头用到的dowhile，在这里，把属性设置的快捷方式设为property
⑥Completion Scopes
可以在哪些文件中使用当前代码片段，比如全部位置，头文件中等，当然可以添加多个支持的位置。
最后的一个大得空白区域是对代码片段的效果预览。
一切设置完成以后，点击该菜单右下角的Done按钮，新建工作就结束了。

代码片段存放地址:~/Library/Developer/Xcode/UserData/CodeSnippets
```





### Xcode 项目调试

断点调试

视图调试

[LLDB调试](https://xilankong.github.io/2016年/2016/11/29/问题处理(xcode代码调试).html)

IOS模拟器调试：

```
模拟器的使用：旋转、截屏、慢动作、colorlayers、window大小 scale
```



IOS真机调试 （模拟器毕竟是模拟器） http://www.runoob.com/ios/ios-first-iphone-application.html



[Xcode常用知识](https://xilankong.github.io/2016年/2016/11/01/常用知识(xcode常用知识).html)



## 4.IOS基础

### Xib / Storyboard 的使用

纯代码写界面有时候会降低开发效率，对于一些通用简单的界面，例如程序设置界面，可以使用Xib / Storyboard 进行开发。相对于Xib，使用Storyboard可以更好地了解App中所有的视图以及它们之间的关联的概况。掌控全局更加容易，因为所有的设计都包含在一个文件中，而不是分散在很多单独的nib文件中。

Xib / Storyboard文件本质上是一个xml文件。

XIB doucument类型：com.apple.InterfaceBuilder3.CocoaTouch.XIB

Storyboard document类型：com.apple.InterfaceBuilder3.CocoaTouch.Storyboard.XIB

scenes 可以理解为一个个页面（navigationViewController、viewController等等）

segue  转场  通过连接不同的视图控制器来创建转场实现视图控制器之间的过渡，并且携带参数

不过一般不直接进行编辑 xml。



### UI控件

没什么太多可描述，主要见操作

#### 1.按钮事件的绑定

```
open func addTarget(_ target: Any?, action: Selector, for controlEvents: UIControlEvents)
```

#### 2.其他事件的绑定

```
let ges = UITapGestureRecognizer(target: self, action: #selector(tapAction(_:)))
myView.addGestureRecognizer(ges)

UITapGestureRecognizer 轻触手势
UIPinchGestureRecognizer 捏合手势
UIRotationGestureRecognizer 旋转手势
UISwipeGestureRecognizer 轻扫手势
UIPanGestureRecognizer 拖动手势
UIScreenEdgePanGestureRecognizer 屏幕边缘拖动手势
UILongPressGestureRecognizer 长按手势
```

#### 3.delegate 和 dataSource

在iOS中委托通过 @protocol (协议) 的方式实现 ,协议中定义但不实现方法。方法的具体实现交由具体的 实现了这个协议的对象去实现。

我们需要使用tableView的代理，需要控制器实现对应的协议，同时，tableView中定义了一个变量用于接收实现了协议的对象，从而通过这个对象去调用具体的方法实现。实现了协议，必然被要求实现一些方法，如果这些方法写在控制器中，也就是 self 下面，那么我们传入delegate 和 dataSource的对象 就是  self。

#### 4.自定义控件

继承、拓展

#### 5.IOS屏幕

```
iphone 的 屏幕宽度 、像素比、scale(分辨率等级)

设备	尺寸		 屏幕比例(pt) 设备分辨率	 scale
4S	3.5 INCH	320*480		640*960		2(326ppi)
5S	4.0	INCH	320*568		640*1136	2
6	4.7 INCH	375*667		750*1334	2
6+	5.5 INCH	414*736		1080*1920	3
7	4.7 INCH	375*667		750*1334	2
7+	5.5 INCH	414*736		1080*1920	3(401ppi)
PPI (密度单位 图像分辨率 在图像中，每英寸所包含的像素数目) = （（根号 （宽平方 + 高平方））/尺寸）
pt IOS基本单位 1pt = 1/72英寸。
```



### 生命周期

#### 1.控制器的生命周期

![](https://xilankong.github.io/resource/lifecycle.jpeg)

#### 2.App的生命周期

#### 程序入口：

OC  ：main.m 文件中的 main 方法 调用 UIApplicationMain

```
int main(int argc, char * argv[]) {
    @autoreleasepool {
        return UIApplicationMain(argc, argv, nil, NSStringFromClass([AppDelegate class]));
    }
}
```

Swift ：Appdelegate.swift 中 的 @UIApplicationMain 相当于 main方法

#### App启动：

![](https://xilankong.github.io/resource/appLaunch.png)



App进入后台：

![](https://xilankong.github.io/resource/appBackground.png)



runLoop原理

### 其他内容

[CocoaPods 从安装到使用](https://xilankong.github.io/2016年/2016/06/24/CocoaPods-从安装到使用.html)

IOS 文件

沙盒目录，IOS查看文件 日志目录

Xcode自带测试功能

Instrument / Time Profiler/ Leaks /单元测试

其他三方测试

SwiftLint 静态代码扫描



## 5.第一个项目

小demo 应用调试、页面间的传值，



## 6.问答

[事件响应链](https://xilankong.github.io/学习之路/2017/03/30/IOS事件响应链.html)

异常捕获 

```
do {
    defer {
  		print("异常已经抛出")
	}
    throw myError.testError
} catch {
    print(error)
}
```

Fatal Errors（致命的错误）

Assertions（断言） 

但是异常捕获在IOS中使用较少，一些崩溃异常也是catch不到的, 最典型的是访问一个对象不存在的方法，会造成crash。用objc提供的异常处理根本catch不到异常，一但这种情况发生就等于给app判了死刑

未完成

## 7.IOS学习方向





## 8.参考资料

[官方文档](https://developer.apple.com/library/content/navigation/)

