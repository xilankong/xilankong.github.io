---
layout: post
category: 2017年
title : "jenkins使用说明书"
---



1、xcode直接打包上穿itc原理







xcodebuild打包  xcodebuild test

xctool 打包  facebook  xcodebuild 的扩展   xcodebuild test

xcpretty

xcodebuild xcpretty是一个快速和灵活的格式化程序，格式化xcodebuild输出

 ci



1、xctool生成archive xcodebuild生成ipa

2、xcodebuild生成archive xcrun生成ipa

3、直接用xcodebuild生成 archive + xcpretty 格式化输出，签名，然后打包 ipa 



```
1、打包时必须进入项目目录进行
2、获取证书名称：Launchpad->其他->钥匙串访问->选择证书->鼠标右击->显示简介->细节->常用名称->复制
3、获取描述文件UUID：打开Xcode->菜单栏->Preferences->Accounts->Apple IDs->帐号->show Details->Provisioning Profiles->选择项目中使用的描述文件->鼠标右击->show in Finder
4、获取target/schemes：终端->cd 项目目录->进入项目目录后，执行命令"xcodebuild -list"
```



xcode重新签名

http://blog.csdn.net/qq_34047841/article/details/54144149



```
- exportOptionsPlist 文件格式

compileBitcode : Bool

  For non-App Store exports, should Xcode re-compile the app from bitcode? Defaults to YES.

embedOnDemandResourcesAssetPacksInBundle : Bool

  For non-App Store exports, if the app uses On Demand Resources and this is YES, asset   
  packs are embedded in the app bundle so that the app can be tested without a server to   
  host asset packs. Defaults to YES unless onDemandResourcesAssetPacksBaseURL is specified.

iCloudContainerEnvironment

  For non-App Store exports, if the app is using CloudKit, this configures the   
  "com.apple.developer.icloud-container-environment" entitlement. Available options:   
  Development and Production. Defaults to Development.

manifest : Dictionary

  For non-App Store exports, users can download your app over the web by opening your   
  distribution manifest file in a web browser. To generate a distribution manifest, the   
  value of this key should be a dictionary with three sub-keys: appURL, displayImageURL,   
  fullSizeImageURL. The additional sub-key assetPackManifestURL is required when using on demand resources.

method : String
{app-store, ad-hoc, enterprise, development}
  Describes how Xcode should export the archive. Available options: app-store, ad-hoc,   
  package, enterprise, development, and developer-id. The list of options varies based on   
  the type of archive. Defaults to development.

onDemandResourcesAssetPacksBaseURL : String

  For non-App Store exports, if the app uses On Demand Resources and   
  embedOnDemandResourcesAssetPacksInBundle isn't YES, this should be a base URL specifying   
  where asset packs are going to be hosted. This configures the app to download asset   
  packs from the specified URL.

teamID : String
在app Account Membership 里面有写 
  The Developer Portal team to use for this export. Defaults to the team used to build the archive.

thinning : String

  For non-App Store exports, should Xcode thin the package for one or more device   
  variants? Available options: <none> (Xcode produces a non-thinned universal app),   
  <thin-for-all-variants> (Xcode produces a universal app and all available thinned   
  variants), or a model identifier for a specific device (e.g. "iPhone7,1"). Defaults to <none>.

uploadBitcode : Bool

  For App Store exports, should the package include bitcode? Defaults to YES.

uploadSymbols : Bool

  For App Store exports, should the package include symbols? Defaults to YES.
```





目标

- 内部测试版本：使用标准开发者的Developer证书签名的ipa文件。
- 公开测试版本：使用企业账户的Distribute InHouse证书签名的ipa文件。
- AppStore版本：使用标准开发者的AppStore证书签名的ipa文件。
- 保留每个版本的dSYM调试符号文件。



fastlane

安装 http://www.jianshu.com/p/78e324a4962c



http://blog.csdn.net/jiang314/article/details/54929471



http://www.cocoachina.com/ios/20150728/12733.html

deliver

一个命令上传截图,元数据和应用程序到ITC



spaceship

With spaceship it is possible to directly access the underlying APIs using a simple HTTP client only.

直接访问底层api，通过一个简单的HTTP客户端



Apple Developer Portal API



iTunes Connect API



https://idmsa.apple.com



在自己电脑上实现一套上架流程，企业化实现。



gym

自动打包

原理

- `xcodebuild`

- [xcpretty](https://github.com/supermarin/xcpretty)

  **xcpretty is a fast and flexible formatter for xcodebuild**.



pem

自动生成和更新推送式通知配置文件

RSA公钥文件（PEM）

pem创建新的 pem、cer、p12文件 用来上传到您的 服务器如果需要有效的推送通知配置文件

1、创建一个签名请求

2、创建一个新的推送证书

3、下载证书

4、生成一个新的 pem文件 在当前工作目录，你可以把它上传到你的服务器

note 

pem will never revoke your existing certificates. 

pem can't download any of your existing push certificates

as the private key is only available on the machine it was created on.

如果你已经有一个推证书启用,这是活跃的至少30天,pem不会创建一个新的证书。如果你还想创建一个

```
fastlane pem --force
```

传递参数

```
fastlane pem -a com.krausefx.app -u username
```



sigh

创建\更新\下载和修复 provisioning profiles,支持App Store, Ad Hoc, Development和企业profiles







match



