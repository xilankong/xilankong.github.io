---
layout: post
category: 其他知识
title : "微信相关服务使用说明书"
---



## 1、微信登录





## 2、微信分享





## 3、微信分享转小程序



### 微信平台介绍：

1、微信开放平台：用在客户端接入微信SDK、常见的就是分享

2、微信公众平台：小程序所在平台，小程序有原始ID、AppID，分享转小程序打开的时候需要原始ID



### 客户端分享到微信并以小程序的方式打开：

微信6.5.3版本以后支持小程序，并且17年三月份后就允许客户端分享出去的内容可以转换为小程序浏览。

客户端分享到微信要通过小程序打开需要注意：

```
官方文档：

1. 发起分享的App与小程序属于同一微信开放平台帐号。

2. 支持分享小程序类型消息至会话，暂不支持分享至朋友圈。

3. 若客户端版本低于6.5.6或在iPad客户端接收，小程序类型分享将自动转成网页类型分享。开发者必须填写网页链接字段，确保低版本客户端能正常打开网页链接。
```

实际开发中遇到的需要注意的点：

1、需要客户端APP所在微信开放平台 (接微信SDK的时候注册的开放平台) 进行认证、认证后关联需要分享打开的小程序、最多可以关联五个。

2、小程序关联的移动应用关联对应客户端App。

3、小程序存在多个环境：开发、体验、正式，通过扫描对应二维码可以识别，需要权限

```
我们在开发中的时候、小程序属于开发环境，要访问开发环境的小程序需要权限：微信账号需要加入小程序的开发者列表里面。添加完成后，扫描小程序的开发版二维码就可以访问开发版的小程序了。

要注意的是如果我们开发期间需要控制分享到小程序的环境，可以通过miniProgramType 控制我们要分享出去的小程序环境。
miniProgramType:

typedef NS_ENUM(NSUInteger, WXMiniProgramType){
    WXMiniProgramTypeRelease = 0,       //**< 正式版  */
    WXMiniProgramTypeTest = 1,        //**< 开发版  */
    WXMiniProgramTypePreview = 2,         //**< 体验版  */
};
```

4、我们客户端APP要分享到微信并用小程序打开的话，需要更新最新微信sdk，接入代码见[文档](https://open.weixin.qq.com/cgi-bin/showdocument?action=dir_list&t=resource/res_list&verify=1&id=open1419317332&token=&lang=zh_CN)

5、当我们配置好客户端代码后需要注意对应的图片资源大小，很容易因为图片资源过大分享不出去。

6、分享微信通过小程序打开的场景，需要配小程序封面图

```
小程序转发出去的小程序分享默认做了当前小程序页面的截图 (5：4比例的当前页面截图)

而客户端这边分享到微信的小程序分享链，的封面图示独立配置的，可以是固定的图片，这边处理方式和小程序一样，做了当前页面顶部的截图。

处理方式版本2：

自己生成对应View，自定义样式，然后绘制成5:4的image， 不同设备会有不同大小，特别是在安卓机器上的时候

```



### 小程序打开App

小程序允许由App分享出去的小程序链接打开小程序后 可以回到App。但是直接打开的小程序是无法打开App的。

小程序端可以判断是否可以跳转App

### 小程序发布

小程序第一次发布大概一天时间

小程序迭代发布大概几个小时



小程序提交审核的时候，名称中最好不要明显涉及公司主体没有运营的业务。内容审核没有那么严谨



### 参考



[App端文档](https://open.weixin.qq.com/cgi-bin/showdocument?action=dir_list&t=resource/res_list&verify=1&id=open1419317332&token=&lang=zh_CN)

[小程序端文档](https://developers.weixin.qq.com/miniprogram/dev/api/)