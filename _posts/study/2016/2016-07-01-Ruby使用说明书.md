---
layout: post
category: 2016年
title : "Ruby使用说明书"
---



## Ruby 概述

在介绍 CocoaPods 的实现之前，我们需要对 Ruby 的一些特性有一个简单的了解，在向身边的朋友“传教”的时候，我往往都会用优雅这个词来形容这门语言~~（手动微笑）~~。

除了优雅之外，Ruby 的语法具有强大的表现力，并且其使用非常灵活，能快速实现我们的需求，这里简单介绍一下 Ruby 中的一些特性。

### 一切皆对象

在许多语言，比如 Java 中，数字与其他的基本类型都不是对象，而在 Ruby 中所有的元素，包括基本类型都是对象，同时也不存在运算符的概念，所谓的 `1 + 1`，其实只是 `1.+(1)`的语法糖而已。在 Ruby 中，你可以向任意的对象发送 `methods` 消息，在运行时自省，所以笔者在每次忘记方法时，都会直接用 `methods` 来“查文档”：

```
puts 1.methods

会打印出一堆method
```

一切皆对象不仅减少了语言中类型的不一致，消灭了基本数据类型与对象之间的边界；这一概念同时也简化了语言中的组成元素，这样 Ruby 中只有对象和方法，这两个概念，这也降低了我们理解这门语言的复杂度：

- 使用对象存储状态
- 对象之间通过方法通信

### block

Ruby 对函数式编程范式的支持是通过 block，这里的 block 和 Objective-C 中的 block 有些不同。

首先 Ruby 中的 block 也是一种对象，所有的 Block 都是 Proc 类的实例，也就是所有的 block 都是 first-class 的，可以作为参数传递，返回。

```
def twice(&proc)
    2.times { proc.call() } if proc
end

def twice
    2.times { yield } if block_given?
end
```

> `yield`会调用外部传入的 block，`block_given?`用于判断当前方法是否传入了 `block`。

在这个方法调用时，是这样的：

```
twice do 
    puts "Hello"
end
```

### eval

最后一个需要介绍的特性就是 `eval`了，早在几十年前的 Lisp 语言就有了 `eval`这个方法，这个方法会将字符串当做代码来执行，也就是说 `eval`模糊了代码与数据之间的边界。

```
> eval "1 + 2 * 3"
 => 7
```

有了 `eval`方法，我们就获得了更加强大的动态能力，在运行时，使用字符串来改变控制流程，执行代码；而不需要去手动解析输入、生成语法树。