 isa-swizzling

runtime

http://www.jianshu.com/p/a0aaf0ffe6e1

http://www.jianshu.com/p/829864680648

\

objc_class  *Class



kvoå®ç°

https://juejin.im/entry/59e5c3306fb9a0451329c47b

http://www.jianshu.com/p/ff19c04b34d0

http://www.jianshu.com/p/59b2b0ad6401





1ã€æµ©å¤§å·¥ç¨‹éœ€è¦æ¯ä¸€ä¸ªæ§åˆ¶å™¨æ·»åŠ è¿›å…¥ç»Ÿè®¡åŠŸèƒ½



```
Category
æˆ‘ä»¬å¯ä»¥ä¸ºUIViewControllerå»ºä¸€ä¸ªCategoryï¼Œç„¶ååœ¨æ‰€æœ‰æ§åˆ¶å™¨ä¸­å¼•å…¥è¿™ä¸ªCategoryã€‚å½“ç„¶æˆ‘ä»¬ä¹Ÿå¯ä»¥æ·»åŠ ä¸€ä¸ªPCHæ–‡ä»¶ï¼Œç„¶åå°†è¿™ä¸ªCategoryæ·»åŠ åˆ°PCHæ–‡ä»¶ä¸­ã€‚
æˆ‘ä»¬åˆ›å»ºä¸€ä¸ªCategoryæ¥è¦†ç›–ç³»ç»Ÿæ–¹æ³•ï¼Œç³»ç»Ÿä¼šä¼˜å…ˆè°ƒç”¨Categoryä¸­çš„ä»£ç ï¼Œç„¶ååœ¨è°ƒç”¨åŸç±»ä¸­çš„ä»£ç ã€‚
æˆ‘ä»¬å¯ä»¥é€šè¿‡ä¸‹é¢çš„è¿™æ®µä¼ªä»£ç æ¥çœ‹ä¸€ä¸‹ï¼š

#import "UIViewController+EventGather.h"

@implementation UIViewController (EventGather)

- (void)viewDidLoad {

NSLog(@"é¡µé¢ç»Ÿè®¡:%@", self);

}

@end

Method Swizzling



```



å¼‚å¸¸

```
UIViewController (test)

+ (void)load {
    Method from = class_getInstanceMethod([self class], @selector(viewDidLoad));
    Method to = class_getInstanceMethod([self class], @selector(huang_viewDidLoad));
    
    if (!class_addMethod([self class], @selector(huang_viewDidLoad), method_getImplementation(to), method_getTypeEncoding(to))) {
        method_exchangeImplementations(from, to);
    }
}

-(void)huang_viewDidLoad {
    NSLog(@"äº¤æ¢åæ–¹æ³•");
    [self huang_viewDidLoad];
}

ViewController

- (void)viewDidLoad {
    NSLog(@"è¿™ä¸ªæ˜¯ä»€ä¹ˆ");
    [super viewDidLoad];
    NSLog(@"è¿™ä¸ªæ˜¯VC");
}

æ‰“å°ç»“æœï¼š
2017-12-06 10:55:58.234808+0800 OcDemo[25497:1013706] è¿™ä¸ªæ˜¯ä»€ä¹ˆ
2017-12-06 10:55:59.215341+0800 OcDemo[25497:1013706] äº¤æ¢åæ–¹æ³•
2017-12-06 10:56:01.623221+0800 OcDemo[25497:1013706] è¿™ä¸ªæ˜¯VC


åŸå› ï¼Œæˆ‘ä»¬å†™çš„æ‰©å±•æ˜¯åŸºäº UIViewController ï¼Œè€Œæ§åˆ¶å™¨çš„è°ƒç”¨æ–¹å¼æ˜¯å…ˆæœç´¢å­ç±»ï¼Œç„¶åæ ¹æ®å­ç±»çš„å¤å†™çš„viewDidLoadæ–¹æ³•å»å‘çˆ¶ç±»ï¼ˆUIViewControllerï¼‰æœç´¢ viewDidLoad æ–¹æ³•ï¼Œè€Œæˆ‘ä»¬äº¤æ¢çš„å…¶å®æ˜¯ UIViewControllerçš„å®ç°ï¼Œæ‰€ä»¥æ–¹æ³•ä¼šå…ˆè¿›å…¥å­ç±»ï¼Œç„¶åå†è¿›å…¥çˆ¶ç±»è¢«äº¤æ¢æ–¹æ³•ã€‚


```

#### Method Swizzlingç±»ç°‡

ä¹‹å‰æˆ‘ä¹Ÿè¯´åˆ°ï¼Œåœ¨æˆ‘ä»¬é¡¹ç›®å¼€å‘è¿‡ç¨‹ä¸­ï¼Œç»å¸¸å› ä¸º`NSArray`æ•°ç»„è¶Šç•Œæˆ–è€…`NSDictionary`çš„`key`æˆ–è€…`value`å€¼ä¸º`nil`ç­‰é—®é¢˜å¯¼è‡´çš„å´©æºƒï¼Œå¯¹äºè¿™äº›é—®é¢˜è‹¹æœå¹¶ä¸ä¼šæŠ¥ä¸€ä¸ªè­¦å‘Šï¼Œè€Œæ˜¯ç›´æ¥å´©æºƒï¼Œæ„Ÿè§‰è‹¹æœè¿™æ ·ç¡®å®æœ‰ç‚¹â€œå¤ªç‹ äº†â€ã€‚

ç”±æ­¤ï¼Œæˆ‘ä»¬å¯ä»¥æ ¹æ®ä¸Šé¢æ‰€å­¦ï¼Œå¯¹`NSArray`ã€`NSMutableArray`ã€`NSDictionary`ã€`NSMutableDictionary`ç­‰ç±»è¿›è¡Œ`Method Swizzling`ï¼Œå®ç°æ–¹å¼è¿˜æ˜¯æŒ‰ç…§ä¸Šé¢çš„ä¾‹å­æ¥åšã€‚ä½†æ˜¯....ä½ å‘ç°`Method Swizzling`æ ¹æœ¬å°±ä¸èµ·ä½œç”¨ï¼Œä»£ç ä¹Ÿæ²¡å†™é”™å•Šï¼Œåˆ°åº•æ˜¯ä»€ä¹ˆé¬¼ï¼Ÿ

è¿™æ˜¯å› ä¸º`Method Swizzling`å¯¹`NSArray`è¿™äº›çš„ç±»ç°‡æ˜¯ä¸èµ·ä½œç”¨çš„ã€‚å› ä¸ºè¿™äº›ç±»ç°‡ç±»ï¼Œå…¶å®æ˜¯ä¸€ç§æŠ½è±¡å·¥å‚çš„è®¾è®¡æ¨¡å¼ã€‚æŠ½è±¡å·¥å‚å†…éƒ¨æœ‰å¾ˆå¤šå…¶å®ƒç»§æ‰¿è‡ªå½“å‰ç±»çš„å­ç±»ï¼ŒæŠ½è±¡å·¥å‚ç±»ä¼šæ ¹æ®ä¸åŒæƒ…å†µï¼Œåˆ›å»ºä¸åŒçš„æŠ½è±¡å¯¹è±¡æ¥è¿›è¡Œä½¿ç”¨ã€‚ä¾‹å¦‚æˆ‘ä»¬è°ƒç”¨`NSArray`çš„`objectAtIndex:`æ–¹æ³•ï¼Œè¿™ä¸ªç±»ä¼šåœ¨æ–¹æ³•å†…éƒ¨åˆ¤æ–­ï¼Œå†…éƒ¨åˆ›å»ºä¸åŒæŠ½è±¡ç±»è¿›è¡Œæ“ä½œã€‚

æ‰€ä»¥ä¹Ÿå°±æ˜¯æˆ‘ä»¬å¯¹`NSArray`ç±»è¿›è¡Œæ“ä½œå…¶å®åªæ˜¯å¯¹çˆ¶ç±»è¿›è¡Œäº†æ“ä½œï¼Œåœ¨`NSArray`å†…éƒ¨ä¼šåˆ›å»ºå…¶ä»–å­ç±»æ¥æ‰§è¡Œæ“ä½œï¼ŒçœŸæ­£æ‰§è¡Œæ“ä½œçš„å¹¶ä¸æ˜¯`NSArray`è‡ªèº«ï¼Œæ‰€ä»¥æˆ‘ä»¬åº”è¯¥å¯¹å…¶â€œçœŸèº«â€è¿›è¡Œæ“ä½œã€‚

###### ä¸‹é¢æˆ‘ä»¬å®ç°äº†é˜²æ­¢`NSArray`å› ä¸ºè°ƒç”¨`objectAtIndex:`æ–¹æ³•ï¼Œå–ä¸‹æ ‡æ—¶æ•°ç»„è¶Šç•Œå¯¼è‡´çš„å´©æºƒï¼š

```
#import "NSArray+LXZArray.h"
#import "objc/runtime.h"
@implementation NSArray (LXZArray)
+ (void)load {
    Method fromMethod = class_getInstanceMethod(objc_getClass("__NSArrayI"), @selector(objectAtIndex:));
    Method toMethod = class_getInstanceMethod(objc_getClass("__NSArrayI"), @selector(lxz_objectAtIndex:));
    method_exchangeImplementations(fromMethod, toMethod);
}

- (id)lxz_objectAtIndex:(NSUInteger)index {
    if (self.count-1 < index) {
        // è¿™é‡Œåšä¸€ä¸‹å¼‚å¸¸å¤„ç†ï¼Œä¸ç„¶éƒ½ä¸çŸ¥é“å‡ºé”™äº†ã€‚
        @try {
            return [self lxz_objectAtIndex:index];
        }
        @catch (NSException *exception) {
            // åœ¨å´©æºƒåä¼šæ‰“å°å´©æºƒä¿¡æ¯ï¼Œæ–¹ä¾¿æˆ‘ä»¬è°ƒè¯•ã€‚
            NSLog(@"---------- %s Crash Because Method %s  ----------\n", class_getName(self.class), __func__);
            NSLog(@"%@", [exception callStackSymbols]);
            return nil;
    }
        @finally {}
    } else {
        return [self lxz_objectAtIndex:index];
    }
}
@end

```

å¤§å®¶å‘ç°äº†å—ï¼Œ`__NSArrayI`æ‰æ˜¯`NSArray`çœŸæ­£çš„ç±»ï¼Œè€Œ`NSMutableArray`åˆä¸ä¸€æ ·ğŸ˜‚ã€‚æˆ‘ä»¬å¯ä»¥é€šè¿‡`runtime`å‡½æ•°è·å–çœŸæ­£çš„ç±»ï¼š

```
objc_getClass("__NSArrayI")

```

###### ä¸‹é¢æˆ‘ä»¬åˆ—ä¸¾ä¸€äº›å¸¸ç”¨çš„ç±»ç°‡çš„â€œçœŸèº«â€ï¼š

| ç±»                   | â€œçœŸèº«â€            |
| ------------------- | --------------- |
| NSArray             | __NSArrayI      |
| NSMutableArray      | __NSArrayM      |
| NSDictionary        | __NSDictionaryI |
| NSMutableDictionary | __NSDictionaryM |

å…¶ä»–è‡ªè¡ŒGoogle....

#### Method Swizzlingå°è£…

åœ¨é¡¹ç›®ä¸­æˆ‘ä»¬è‚¯å®šä¼šåœ¨å¾ˆå¤šåœ°æ–¹ç”¨åˆ°`Method Swizzling`ï¼Œè€Œä¸”åœ¨ä½¿ç”¨è¿™ä¸ªç‰¹æ€§æ—¶æœ‰å¾ˆå¤šéœ€è¦æ³¨æ„çš„åœ°æ–¹ã€‚æˆ‘ä»¬å¯ä»¥å°†`Method Swizzling`å°è£…èµ·æ¥ï¼Œä¹Ÿå¯ä»¥ä½¿ç”¨ä¸€äº›æ¯”è¾ƒæˆç†Ÿçš„ç¬¬ä¸‰æ–¹ã€‚
åœ¨è¿™é‡Œæˆ‘æ¨è**Github**ä¸Šæ˜Ÿæœ€å¤šçš„ä¸€ä¸ªç¬¬ä¸‰æ–¹ï¼[jrswizzle](https://link.jianshu.com?t=https://github.com/rentzsch/jrswizzle)

é‡Œé¢æ ¸å¿ƒå°±ä¸¤ä¸ªç±»ï¼Œä»£ç çœ‹èµ·æ¥éå¸¸æ¸…çˆ½ã€‚
\#import <Foundation/Foundation.h>
@interface NSObject (JRSwizzle)
\+ (BOOL)jr_swizzleMethod:(SEL)origSel_ withMethod:(SEL)altSel_ error:(NSError**)error_;
\+ (BOOL)jr_swizzleClassMethod:(SEL)origSel_ withClassMethod:(SEL)altSel_ error:(NSError**)error_;
@end

```
// MethodSwizzleç±»
#import <objc/objc.h>
BOOL ClassMethodSwizzle(Class klass, SEL origSel, SEL altSel);
BOOL MethodSwizzle(Class klass, SEL origSel, SEL altSel);

```

#### Method Swizzling é”™è¯¯å‰–æ

åœ¨ä¸Šé¢çš„ä¾‹å­ä¸­ï¼Œå¦‚æœåªæ˜¯å•ç‹¬å¯¹`NSArray`æˆ–`NSMutableArray`ä¸­çš„å•ä¸ªç±»è¿›è¡Œ`Method Swizzling`ï¼Œæ˜¯å¯ä»¥æ­£å¸¸ä½¿ç”¨å¹¶ä¸”ä¸ä¼šå‘ç”Ÿå¼‚å¸¸çš„ã€‚å¦‚æœè¿›è¡Œ`Method Swizzling`çš„ç±»ä¸­ï¼Œæœ‰ä¸¤ä¸ªç±»æœ‰ç»§æ‰¿å…³ç³»çš„ï¼Œå¹¶ä¸”`Swizzling`äº†åŒä¸€ä¸ªæ–¹æ³•ã€‚ä¾‹å¦‚åŒæ—¶å¯¹`NSArray`å’Œ`NSMutableArray`ä¸­çš„`objectAtIndex:`æ–¹æ³•éƒ½è¿›è¡Œäº†`Swizzling`ï¼Œè¿™æ ·å¯èƒ½ä¼šå¯¼è‡´çˆ¶ç±»`Swizzling`å¤±æ•ˆçš„é—®é¢˜ã€‚

å¯¹äºè¿™ç§é—®é¢˜ä¸»è¦æ˜¯ä¸¤ä¸ªåŸå› å¯¼è‡´çš„ï¼Œé¦–å…ˆæ˜¯ä¸è¦åœ¨`+ (void)load`æ–¹æ³•ä¸­è°ƒç”¨`[super load]`æ–¹æ³•ï¼Œè¿™ä¼šå¯¼è‡´çˆ¶ç±»çš„`Swizzling`è¢«é‡å¤æ‰§è¡Œä¸¤æ¬¡ï¼Œè¿™æ ·çˆ¶ç±»çš„`Swizzling`å°±ä¼šå¤±æ•ˆã€‚ä¾‹å¦‚ä¸‹é¢çš„ä¸¤å¼ å›¾ç‰‡ï¼Œä½ ä¼šå‘ç°ç”±äº`NSMutableArray`è°ƒç”¨äº†`[super load]`å¯¼è‡´çˆ¶ç±»`NSArray`çš„`Swizzling`ä»£ç è¢«æ‰§è¡Œäº†ä¸¤æ¬¡ã€‚

###### é”™è¯¯ä»£ç ï¼š

```
#import "NSMutableArray+LXZArrayM.h"
@implementation NSMutableArray (LXZArrayM)
+ (void)load {
    // è¿™é‡Œä¸åº”è¯¥è°ƒç”¨superï¼Œä¼šå¯¼è‡´çˆ¶ç±»è¢«é‡å¤Swizzling
    [super load];

    Method fromMethod = class_getInstanceMethod(objc_getClass("__NSArrayM"), @selector(objectAtIndex:));
    Method toMethod = class_getInstanceMethod(objc_getClass("__NSArrayM"), @selector(lxz_objectAtIndexM:));
    method_exchangeImplementations(fromMethod, toMethod);
}

```

###### è¿™é‡Œç”±äºåœ¨å­ç±»ä¸­è°ƒç”¨äº†superï¼Œå¯¼è‡´NSMutableArrayæ‰§è¡Œæ—¶ï¼Œçˆ¶ç±»NSArrayä¹Ÿè¢«æ‰§è¡Œäº†ä¸€æ¬¡ã€‚

![img](http://upload-images.jianshu.io/upload_images/270478-938623cd9bf7c7e7.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/508)

ç¬¬ä¸€æ¬¡

###### çˆ¶ç±»NSArrayæ‰§è¡Œäº†ç¬¬äºŒæ¬¡Swizzlingï¼Œè¿™æ—¶å€™å°±ä¼šå‡ºç°é—®é¢˜ï¼Œåé¢ä¼šè®²å…·ä½“åŸå› ã€‚

![img](http://upload-images.jianshu.io/upload_images/270478-64b94e4bd8ce3ee0.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/508)

ç¬¬äºŒæ¬¡

è¿™æ ·å°±ä¼šå¯¼è‡´ç¨‹åºè¿è¡Œè¿‡ç¨‹ä¸­ï¼Œå­ç±»è°ƒç”¨`Swizzling`çš„æ–¹æ³•æ˜¯æ²¡æœ‰é—®é¢˜çš„ï¼Œçˆ¶ç±»è°ƒç”¨åŒä¸€ä¸ªæ–¹æ³•å°±ä¼šå‘ç°`Swizzling`å¤±æ•ˆäº†.....å…·ä½“åŸå› æˆ‘ä»¬åé¢è®²ï¼

è¿˜æœ‰ä¸€ä¸ªåŸå› å°±æ˜¯å› ä¸ºä»£ç é€»è¾‘å¯¼è‡´`Swizzling`ä»£ç è¢«æ‰§è¡Œäº†å¤šæ¬¡ï¼Œè¿™ä¹Ÿä¼šå¯¼è‡´`Swizzling`å¤±æ•ˆï¼Œå…¶å®åŸç†å’Œä¸Šé¢çš„é—®é¢˜æ˜¯ä¸€æ ·çš„ï¼Œæˆ‘ä»¬ä¸‹é¢è®²è®²ä¸ºä»€ä¹ˆä¼šå‡ºç°è¿™ä¸ªé—®é¢˜ã€‚

###### é—®é¢˜åŸå› 

æˆ‘ä»¬ä¸Šé¢æåˆ°è¿‡`Method Swizzling`çš„å®ç°åŸç†å°±æ˜¯å¯¹ç±»çš„`Dispatch Table`è¿›è¡Œæ“ä½œï¼Œæ¯è¿›è¡Œä¸€æ¬¡`Swizzling`å°±äº¤æ¢ä¸€æ¬¡`SEL`å’Œ`IMP`(å¯ä»¥ç†è§£ä¸ºå‡½æ•°æŒ‡é’ˆ)ï¼Œå¦‚æœ`Swizzling`è¢«æ‰§è¡Œäº†å¤šæ¬¡ï¼Œå°±ç›¸å½“äº`SEL`å’Œ`IMP`è¢«äº¤æ¢äº†å¤šæ¬¡ã€‚è¿™å°±ä¼šå¯¼è‡´ç¬¬ä¸€æ¬¡æ‰§è¡ŒæˆåŠŸäº¤æ¢äº†ã€ç¬¬äºŒæ¬¡æ‰§è¡Œåˆæ¢å›å»äº†ã€ç¬¬ä¸‰æ¬¡æ‰§è¡Œ.....è¿™æ ·æ¢æ¥æ¢å»çš„ç»“æœï¼Œèƒ½ä¸èƒ½æˆåŠŸå°±çœ‹è¿æ°”äº†ğŸ˜„ï¼Œè¿™ä¹Ÿæ˜¯å¥½å¤šäººè¯´`Method Swizzling`ä¸å¥½ç”¨çš„åŸå› ä¹‹ä¸€ã€‚

###### ä¸€å›¾èƒœåƒè¨€ï¼š

![img](http://upload-images.jianshu.io/upload_images/270478-ffaca421e1b8a5ee.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/700)

Dispatch Table äº¤æ¢æµç¨‹

ä»è¿™å¼ å›¾ä¸­æˆ‘ä»¬ä¹Ÿå¯ä»¥çœ‹å‡ºé—®é¢˜äº§ç”Ÿçš„åŸå› äº†ï¼Œå°±æ˜¯`Swizzling`çš„ä»£ç è¢«é‡å¤æ‰§è¡Œï¼Œä¸ºäº†é¿å…è¿™æ ·çš„åŸå› å‡ºç°ï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡**GCD**çš„`dispatch_once`å‡½æ•°æ¥è§£å†³ï¼Œåˆ©ç”¨`dispatch_once`å‡½æ•°å†…ä»£ç åªä¼šæ‰§è¡Œä¸€æ¬¡çš„ç‰¹æ€§ã€‚

åœ¨æ¯ä¸ª`Method Swizzling`çš„åœ°æ–¹ï¼ŒåŠ ä¸Š`dispatch_once`å‡½æ•°ä¿è¯ä»£ç åªè¢«æ‰§è¡Œä¸€æ¬¡ã€‚å½“ç„¶åœ¨å®é™…ä½¿ç”¨ä¸­ä¹Ÿå¯ä»¥å¯¹ä¸‹é¢ä»£ç è¿›è¡Œå°è£…ï¼Œè¿™é‡Œåªæ˜¯ç»™ä¸€ä¸ªç¤ºä¾‹ä»£ç ã€‚

```
#import "NSMutableArray+LXZArrayM.h"
@implementation NSMutableArray (LXZArrayM)

+ (void)load {
    static dispatch_once_t onceToken;
    dispatch_once(&onceToken, ^{
        Method fromMethod = class_getInstanceMethod(objc_getClass("__NSArrayM"), @selector(objectAtIndex:));
        Method toMethod = class_getInstanceMethod(objc_getClass("__NSArrayM"), @selector(lxz_objectAtIndexM:));
        method_exchangeImplementations(fromMethod, toMethod);
    });
}

```

è¿™é‡Œè¿˜è¦å‘Šè¯‰å¤§å®¶ä¸€ä¸ªè°ƒè¯•å°æŠ€å·§ï¼Œå·²ç»çŸ¥é“çš„å¯ä»¥ç•¥è¿‡ğŸ˜Šã€‚æˆ‘ä»¬ä¹‹å‰è¯´è¿‡`IMP`æœ¬è´¨ä¸Šå°±æ˜¯å‡½æ•°æŒ‡é’ˆï¼Œæ‰€ä»¥æˆ‘ä»¬å¯ä»¥é€šè¿‡æ‰“å°å‡½æ•°æŒ‡é’ˆçš„æ–¹å¼ï¼ŒæŸ¥çœ‹`SEL`å’Œ`IMP`çš„äº¤æ¢æµç¨‹ã€‚

###### å…ˆæ¥ä¸€æ®µæµ‹è¯•ä»£ç ï¼š

```
Method fromMethod = class_getInstanceMethod(objc_getClass("__NSArrayI"), @selector(objectAtIndex:));
Method toMethod = class_getInstanceMethod(objc_getClass("__NSArrayI"), @selector(lxz_objectAtIndex:));

NSLog(@"%p", method_getImplementation(fromMethod));
NSLog(@"%p", method_getImplementation(toMethod));
method_exchangeImplementations(fromMethod, toMethod);

NSLog(@"%p", method_getImplementation(fromMethod));
NSLog(@"%p", method_getImplementation(toMethod));
method_exchangeImplementations(fromMethod, toMethod);

NSLog(@"%p", method_getImplementation(fromMethod));
NSLog(@"%p", method_getImplementation(toMethod));
method_exchangeImplementations(fromMethod, toMethod);

NSLog(@"%p", method_getImplementation(fromMethod));
NSLog(@"%p", method_getImplementation(toMethod));

```

###### çœ‹åˆ°è¿™ä¸ªæ‰“å°ç»“æœï¼Œå¤§å®¶åº”è¯¥æ˜ç™½ä»€ä¹ˆé—®é¢˜äº†å§ï¼š

```
2016-04-13 14:16:33.477 [16314:4979302]      0x1851b7020
2016-04-13 14:16:33.479 [16314:4979302]      0x1000fb3c8
2016-04-13 14:16:33.479 [16314:4979302]      0x1000fb3c8
2016-04-13 14:16:33.480 [16314:4979302]      0x1851b7020
2016-04-13 14:16:33.480 [16314:4979302]      0x1851b7020
2016-04-13 14:16:33.480 [16314:4979302]      0x1000fb3c8
2016-04-13 14:16:33.481 [16314:4979302]      0x1000fb3c8
2016-04-13 14:16:33.481 [16314:4979302]      0x1851b7020

```

------

#### Method Swizzlingå±é™©å—ï¼Ÿ

æ—¢ç„¶`Method Swizzling`å¯ä»¥å¯¹è¿™ä¸ªç±»çš„`Dispatch Table`è¿›è¡Œæ“ä½œï¼Œæ“ä½œåçš„ç»“æœå¯¹æ‰€æœ‰å½“å‰ç±»åŠå­ç±»éƒ½ä¼šäº§ç”Ÿå½±å“ï¼Œæ‰€ä»¥æœ‰äººè®¤ä¸º`Method Swizzling`æ˜¯ä¸€ç§å±é™©çš„æŠ€æœ¯ï¼Œç”¨ä¸å¥½å¾ˆå®¹æ˜“å¯¼è‡´ä¸€äº›ä¸å¯é¢„è§çš„**bug**ï¼Œè¿™äº›**bug**ä¸€èˆ¬éƒ½æ˜¯éå¸¸éš¾å‘ç°å’Œè°ƒè¯•çš„ã€‚

è¿™ä¸ªé—®é¢˜å¯ä»¥å¼•ç”¨[å¿µèŒœ](https://link.jianshu.com?t=http://blog.csdn.net/yiyaaixuexi)å¤§ç¥çš„ä¸€å¥è¯ï¼š`ä½¿ç”¨ Method Swizzling ç¼–ç¨‹å°±å¥½æ¯”åˆ‡èœæ—¶ä½¿ç”¨é”‹åˆ©çš„åˆ€ï¼Œä¸€äº›äººå› ä¸ºæ‹…å¿ƒåˆ‡åˆ°è‡ªå·±æ‰€ä»¥å®³æ€•é”‹åˆ©çš„åˆ€å…·ï¼Œå¯æ˜¯äº‹å®ä¸Šï¼Œä½¿ç”¨é’åˆ€å¾€å¾€æ›´å®¹æ˜“å‡ºäº‹ï¼Œè€Œåˆ©åˆ€æ›´ä¸ºå®‰å…¨ã€‚`

------

åœ¨è¿™ä¸ª`Demo`ä¸­é€šè¿‡`Method Swizzling`ï¼Œç®€å•å®ç°äº†ä¸€ä¸ªå´©æºƒæ‹¦æˆªåŠŸèƒ½ã€‚å®ç°æ–¹å¼å°±æ˜¯å°†åŸæ–¹æ³•`Swizzling`ä¸ºè‡ªå·±å®šä¹‰çš„æ–¹æ³•ï¼Œåœ¨æ‰§è¡Œæ—¶å…ˆåœ¨è‡ªå·±æ–¹æ³•ä¸­åšåˆ¤æ–­ï¼Œæ ¹æ®æ˜¯å¦å¼‚å¸¸å†åšä¸‹ä¸€æ­¥å¤„ç†ã€‚

`Demo`åªæ˜¯æ¥è¾…åŠ©è¯»è€…æ›´å¥½çš„ç†è§£æ–‡ç« ä¸­çš„å†…å®¹ï¼Œ**åº”è¯¥åšå®¢ç»“åˆDemoä¸€èµ·å­¦ä¹ ï¼Œåªçœ‹Demoè¿˜æ˜¯ä¸èƒ½ç†è§£æ›´æ·±å±‚çš„åŸç†**ã€‚`Demo`ä¸­ä»£ç éƒ½ä¼šæœ‰æ³¨é‡Šï¼Œå„ä½å¯ä»¥æ‰“æ–­ç‚¹è·Ÿç€`Demo`æ‰§è¡Œæµç¨‹èµ°ä¸€éï¼Œçœ‹çœ‹å„ä¸ªé˜¶æ®µå˜é‡çš„å€¼ã€‚



